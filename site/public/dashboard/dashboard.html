<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PlanetMinecraft | Admin Area</title>
    <link rel="stylesheet" href="../styles/style.css">
    <!-- <link rel="stylesheet" href="dashboards.css"> -->
    <script src="../js/funcoes.js"></script>
    <!--Icone no title HTML--> <link rel="icon" href="imgs/Imagens/20220503_225050620_iOS.jpg"> 
       <!--Google Fonts--> <link rel="preconnect" href="https://fonts.googleapis.com"> 
       <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
       <link href="https://fonts.googleapis.com/css2?family=Fira+Sans:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Questrial&family=Radio+Canada:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- <link rel="preconnect" href="https://fonts.gstatic.com">
    <link
        href="https://fonts.googleapis.com/css2?family=Exo+2:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
        rel="stylesheet"> -->
    <!--Link Font Awesome--> <script src="https://kit.fontawesome.com/b18c1d249d.js" crossorigin="anonymous"></script> 

        <!-- scripts do Chart.js -->
        <script type="text/javascript" src="https://www.chartjs.org/dist/2.8.0/Chart.min.js"></script>
        
</head>

<body onload="validarSessao(), atualizarFeed()">
    <!-- <body onload="validarSessao()"> -->

    <div class="janela">
        <div class="sidebar">
            <div class="title">
            <span>Planet Minecraft</span>
            <div class="line"></div></div>

            <div class="hello">
                <h5>Welcome, <span id="b_usuario">usuário</span>!</h5>
            </div>

            <div class="btn-nav">   
                <a href="./cards.html">   
                <h5>
                    <i class="fa-solid fa-user"></i> 
                    My Profile</h5>
                </a>
            </div>

            <div class="btn-nav-ativo">
                <a href="./dashboard.html">
                    <h5>
                        <i class="fa-solid fa-user-gear"></i> 
                        Admin Area</h5>
                </a>
            </div>

            <div class="btn-nav">
                <a href="./mural.html">
                    <h5>
                        <i class="fa-solid fa-map"></i>
                        Maps Area</h5>
                </a>
            </div>

            <div class="btn-logout" onclick="limparSessao()">
                <h6>Exit</h6>
            </div>

        </div>

        <div class="dash">
            <div class="cards">
                <div class="card_container">
               
                    <div class="card_time">
                    <div class="infos_time">
                        <h6>Registered players </h6>
                        <h3 id="qtd_players_registrados">100</h3>
                        <div id="card_metrica" class="red"><span>50 players</span> <b>Alert</b></div> <br>
                        <div id="card_metrica" class="yellow">40 players <b>Attention</b></div>

                    </div>
                    <div class="container_canvas">
                    <canvas id="canvas_grafico_registered_month">
                    </div>
                        <!-- testesterfefsrayhuefudhfuawefhaeddfaefeadf -->
                    </canvas>
                </div>


                <div class="container_roscas">

                <div class="card_padrao">
                    <h6>Languages players </h6>
                    <canvas id="canvas_grafico"></canvas>

                </div>
                <div class="card_padrao">
                    <h6>Level players</h6>
                    <canvas id="canvas_grafico1"></canvas>
                </div>
                </div>
                <div class="card_time">
                    <div class="infos_time">
                        <h6 class="title">Acess</h6>
                        <h6>This Week</h6>
                        <h3 id="qtd_acessos_this_week">100</h3>
                        <h6>Last Week</h6>
                        <h3 id="qtd_acessos_last_week">100</h3>
               

                    </div>

                    <canvas id="canvas_grafico_acess"> 
       
                    </canvas>


                </div>
            </div>

                <div class="div_players">
                    <div class="card_padrao" id="card_scrool">
                        <h6 class="title">Latest Registered Players</h6>

                        <div id="players">
                        <div class="info_player">
                            <img src="../imgs/head02.jpg">
                            <div id="texto_player">
                            <h5>Name</h5>
                            <h6>Data Hora</h6>
                        </div>
                        </div>

                        <div class="info_player">
                            <img src="../imgs/head02.jpg">
                            <div id="texto_player">
                            <h5>Name</h5>
                            <h6>Data Hora</h6>
                        </div>
                        </div>

                        <div class="info_player">
                            <img src="../imgs/head02.jpg">
                            <div id="texto_player">
                            <h5>Name</h5>
                            <h6>Data Hora</h6>
                        </div>
                        </div>

                        <div class="info_player">
                            <img src="../imgs/head02.jpg">
                            <div id="texto_player">
                            <h5>Name</h5>
                            <h6>Data Hora</h6>
                        </div>
                        </div>

                        <div class="info_player">
                            <img src="../imgs/head02.jpg">
                            <div id="texto_player">
                            <h5>Name</h5>
                            <h6>Data Hora</h6>
                        </div>
                        </div>

                        <div class="info_player">
                            <img src="../imgs/head02.jpg">
                            <div id="texto_player">
                            <h5>Name</h5>
                            <h6>Data Hora</h6>
                        </div>
                        </div>

                        <div class="info_player">
                            <img src="../imgs/head02.jpg">
                            <div id="texto_player">
                            <h5>Name</h5>
                            <h6>Data Hora</h6>
                        </div>
                        </div>

                        <div class="info_player">
                            <img src="../imgs/head02.jpg">
                            <div id="texto_player">
                            <h5>Name</h5>
                            <h6>Data Hora</h6>
                        </div>
                        </div>

                        <div class="info_player">
                            <img src="../imgs/head02.jpg">
                            <div id="texto_player">
                            <h5>Name</h5>
                            <h6>Data Hora</h6>
                        </div>
                        </div>

                        
                    </div>
                </div>


            </div>
        </div>
                <!-- <div class="card_grafico">
                <canvas id="canvas_grafico"></canvas>
            </div>
            <div class="card_grafico">
            <canvas id="canvas_grafico1"></canvas>
        </div>
    </div> -->
    <!-- <div class="qtd_players_div">
        <div class="metricas">
            <div id="card_metrica" class="red"><span>50 players</span> <b>Alert</b></div>
            <div id="card_metrica" class="yellow">40 players <b>Attention</b></div>
            <div id="card_metrica" class="normal"><b id="qtd_players">40</b> players registered</div>
        </div>
        </div>
    <div class="div_resultado">
        <div class="card_grafico">Level</div>
        <div class="card_grafico">Language</div> 
    </div>

    <div class="div_resultado">
        <div class="card_grafico" id="resultado1">Level</div>
        <div class="card_grafico" id="resultado2">Language</div> 
    </div> -->

    </div>
</div>

</body>

</html>

<script>

    
var basico = 0
var intermediario = 0
var avancado = 0

window.onload = obterDadosGraficoNivel();
window.onload = obterDadosGraficoLingua();
window.onload = atualizarFeed();

window.onload = obterQtdPlayersRegistradosPorMes();

b_usuario.innerHTML = sessionStorage.NOME_USUARIO;
// verificar_autenticacao();


    function obterDadosGraficoNivel() {

        fetch(`/usuarios/recuperardadosnivel`, { cache: 'no-store' }).then(function (response) {
            if (response.ok) {
                response.json().then(function (resposta) {
                    console.log(`Dados recebidos: ${JSON.stringify(resposta)}`);
               //     resposta.reverse();

                    plotarGraficoNivel(resposta);       
                });
            } else {
                console.error('Nenhum dado encontrado ou erro na API');
            }
        })
            .catch(function (error) {
                console.error(`Erro na obtenção dos dados p/ gráfico: ${error.message}`);
            });
    }

    // Esta função *plotarGrafico* usa os dados capturados na função anterior para criar o gráfico
    // Configura o gráfico (cores, tipo, etc), materializa-o na página e, 
    // A função *plotarGrafico* também invoca a função *atualizarGrafico*

    function plotarGraficoNivel(resposta) {
        console.log('iniciando plotagem do gráfico...');

        var dados = {
            labels: ['Basic','Intermediary','Advanced'],
            datasets: [
                {
                    yAxisID: 'y-umidade',
                    label: 'Umidade',
                    borderColor: '#03A63C',
                    backgroundColor: '#04D939',
                    fill: true,
                    data: []
                }
            ]
        };



        for (i = 0; i < resposta.length; i++) {
            var registro = resposta[i];

            if (registro.Nivel == "Basic") {
                basico++
        }   else if (registro.Nivel == "Intermediary") {
                intermediario++
        }   else {
            avancado++
        }
        
         //   dados.datasets[0].data.push(registro.umidade);
        //    dados.datasets[1].data.push(registro.temperatura);
        }
        dados.datasets[0].data.push(basico); 
        dados.datasets[0].data.push(intermediario); 
        dados.datasets[0].data.push(avancado); 

        // colocar_texto_cards();


        console.log("meu teste"+basico)
        console.log(JSON.stringify(dados));

        var ctx = canvas_grafico.getContext('2d');
        window.grafico_linha = Chart.Doughnut(ctx, {
            data:dados,
            options: {
                responsive: true,
                animation: { duration: 1000 },
                hoverMode: 'index',
                stacked: false,
                title: {
                    display: false,
                    text: 'Dados capturados'
                },
                scales: {
                    yAxes: [{
                        type: '',
                        display: true,
                        position: 'left',
                        id: 'y-temperatura',
                        ticks: {
                            beginAtZero: true,
                            max: 10,
                            min: 0
                        }
                    }, {
                        type: '',
                        display: false,
                        position: 'right',
                        id: 'y-umidade',
                        ticks: {
                            beginAtZero: true,
                            max: 10,
                            min: 0
                        },

                        gridLines: {
                            drawOnChartArea: false,
                        },
                    }],
                }
            }
        });

   //     setTimeout(() => atualizarGrafico(idAquario, dados), 4000);
    }

var portugues = 0
var ingles = 0
var espanhol = 0

function obterDadosGraficoLingua() {

        fetch(`/usuarios/recuperardadoslingua`, { cache: 'no-store' }).then(function (response) {
            if (response.ok) {
                response.json().then(function (resposta) {
                    console.log(`Dados recebidos: ${JSON.stringify(resposta)}`);
               //     resposta.reverse();

                    plotarGraficoLingua(resposta);       
                });
            } else {
                console.error('Nenhum dado encontrado ou erro na API');
            }
        })
            .catch(function (error) {
                console.error(`Erro na obtenção dos dados p/ gráfico: ${error.message}`);
            });
    }

    // Esta função *plotarGrafico* usa os dados capturados na função anterior para criar o gráfico
    // Configura o gráfico (cores, tipo, etc), materializa-o na página e, 
    // A função *plotarGrafico* também invoca a função *atualizarGrafico*
    function plotarGraficoLingua(resposta) {
        console.log('iniciando plotagem do gráfico...');

        var dados = {
            labels: ['English','Spanish','Portuguese'],
            datasets: [
                {
                    yAxisID: 'y-umidade',
                    label: 'Umidade',
                    borderColor: '#03A63C',
                    backgroundColor: '#04D939',
                    fill: true,
                    data: []
                }
           
            ]
        };



        for (i = 0; i < resposta.length; i++) {
            var registro = resposta[i];

            if (registro.Lingua == "Portuguese") {
                portugues++
        }   else if (registro.Lingua == "English") {
                ingles++
        }   else {
            espanhol++
        }
        
        }
        dados.datasets[0].data.push(ingles); 
        dados.datasets[0].data.push(espanhol); 
        dados.datasets[0].data.push(portugues); 
      
      
        // colocar_texto_cards();


        console.log("meu teste ingles:"+ingles)
        console.log(JSON.stringify(dados));

        var ctx = canvas_grafico1.getContext('2d');
        window.grafico_linha = Chart.Doughnut(ctx, {
            data:dados,
            options: {
                responsive: true,
                animation: { duration: 4000 },
                hoverMode: 'index',
                stacked: false,
                title: {
                    display: false,
                    text: 'Dados capturados'
                },
                scales: {
                    yAxes: [{
                        type: '',
                        display: true,
                        position: 'left',
                        id: 'y-temperatura',
                        ticks: {
                            beginAtZero: true,
                            max: 10,
                            min: 0
                        }
                    }, {
                        type: '',
                        display: false,
                        position: 'right',
                        id: 'y-umidade',
                        ticks: {
                            beginAtZero: true,
                            max: 10,
                            min: 0
                        },

                        gridLines: {
                            drawOnChartArea: false,
                        },
                    }],
                }
            }
        });

   //     setTimeout(() => atualizarGrafico(idAquario, dados), 4000);
    }





    var cadastros = 0

window.onload = contar_players()

function contar_players() {
    fetch("/usuarios/contarusuarioscadastrados").then(function (res1) {
        if (res1.ok) {
            console.log(res1)
            res1.json().then(function (res1) {
                console.log("Dados recebidos: ", JSON.stringify(res1))
                cadastros = res1[0].QtdCadastros
                qtd_players_registrados.innerHTML = cadastros
                console.log(`Este é a quantidade de ${cadastros}`)
                }
            );
        } else {
            throw ('Houve um erro ao pegar info!');
        }
    }).catch(function (res1) {
        console.error(res1);
    });
}

//  var total_pessoas = 0
//     function colocar_texto_cards() {
//          total_pessoas = basico + intermediario + avancado
        
//         resultado1.innerHTML = `
//         Basic: ${(basico/total_pessoas).toFixed(2) * 100}% <br>
//         Intermediary: ${(intermediario/total_pessoas).toFixed(2) * 100}% <br>
//         Advanced: ${(avancado/total_pessoas).toFixed(2) * 100}%`

//         resultado2.innerHTML = `
//         English: ${(ingles/total_pessoas).toFixed(2) * 100}% <br>
//         Spanish: ${(espanhol/total_pessoas).toFixed(2) * 100}% <br>
//         Portuguese: ${(portugues/total_pessoas).toFixed(2) * 100}%`
//     }

function atualizarFeed() {
        //aguardar();
        fetch("/usuarios/listarnomedata").then(function (resposta) {
            if (resposta.ok) {
                if (resposta.status == 204) {
                    var card = document.getElementById("players");
                    var mensagem = document.createElement("span");
                    mensagem.innerHTML = "Nenhum resultado encontrado."
                    feed.appendChild(mensagem);
                    throw "Nenhum resultado encontrado!!";
                }

                resposta.json().then(function (resposta) {
                    console.log("Dados recebidos: ", JSON.stringify(resposta));

                    var card = document.getElementById("players");
                    card.innerHTML = "";
                    for (let i = 0; i < resposta.length; i++) {
                        var publicacao = resposta[i];

                        // criando e manipulando elementos do HTML via JavaScript
                        var div_info_player = document.createElement("div");
                        var img_head = document.createElement("img")
                        // var spanID = document.createElement("span");
                        var div_texto_player = document.createElement("div");
                        var h5nome = document.createElement("h5");
                        var h6datahora = document.createElement("h6");
                        // var spanNome = document.createElement("span");
                        // var spanWarp = document.createElement("span");
                        // var spanArquivo = document.createElement("span");
                        // var divDescricao = document.createElement("div");
                        // var divButtons = document.createElement("div");
                        //                        var btnEditar = document.createElement("button");
                        // var btnDeletar = document.createElement("button");


                        // spanID.innerHTML = "ID: <b>" + publicacao.idAviso + "</b>";
                        img_head.src = "../imgs/head02.jpg"
                        h5nome.innerHTML = publicacao.nome
                        h6datahora.innerHTML = publicacao.datetime_cadastro
                        // spanNome.innerHTML = "By: <b>" + publicacao.nome + "</b>";
                        // spanArquivo.innerHTML = "File: <b>" + publicacao.arquivo + "</b>";
                        // divDescricao.innerHTML = "Describe: <b>" + publicacao.descricao + "</b>";
                        // //                        btnEditar.innerHTML = "Editar";
                        // btnDeletar.innerHTML = "Delete";


                        div_info_player.className = "info_player";
                        div_texto_player.className = "texto_player";
                        // spanTitulo.id = "inputNumero" + publicacao.idAviso;
                        // spanNome.className = "publicacao-nome";
                        // spanTitulo.className = "publicacao-titulo";
                        // spanWarp.className = "publicacao-warp";
                        // spanArquivo.className = "publicacao-arquivo";
                        // divDescricao.className = "publicacao-descricao";

                        // divButtons.className = "div-buttons"

                        //                       btnEditar.className = "publicacao-btn-editar"
                        //                       btnEditar.id = "btnEditar" + publicacao.idAviso;
                        //                       btnEditar.setAttribute("onclick", `editar(${publicacao.idAviso})`);

                        // btnDeletar.className = "publicacao-btn-editar"
                        // btnDeletar.id = "btnDeletar" + publicacao.idAviso;
                        // btnDeletar.setAttribute("onclick", `deletar(${publicacao.idAviso})`);

                        div_info_player.appendChild(img_head);
                        div_info_player.appendChild(div_texto_player);
                        div_texto_player.appendChild(h5nome);
                        div_texto_player.appendChild(h6datahora);
                        // divPublicacao.appendChild(spanArquivo);
                        // divPublicacao.appendChild(divDescricao);
                        // divPublicacao.appendChild(divButtons);
                        //                        divButtons.appendChild(btnEditar);
                        // divButtons.appendChild(btnDeletar);
                        card.appendChild(div_info_player);
                    }

                    //                    finalizarAguardar();
                });
            } else {
                throw ('Houve um erro na API!');
            }
        }).catch(function (resposta) {
            console.error(resposta);
            //            finalizarAguardar();
        });
    }

function obterQtdPlayersRegistradosPorMes() {

    fetch(`/usuarios/contarregistrospormes`, { cache: 'no-store' }).then(function (response) {
    if (response.ok) {
        response.json().then(function (resposta) {
            console.log(`Dados recebidos: ${JSON.stringify(resposta)}`);
       //     resposta.reverse();

       plotarGraficoRegistrosPorMes(resposta);       
        });
    } else {
        console.error('Nenhum dado encontrado ou erro na API');
    }
})
    .catch(function (error) {
        console.error(`Erro na obtenção dos dados p/ gráfico: ${error.message}`);
    });
}

// Esta função *plotarGrafico* usa os dados capturados na função anterior para criar o gráfico
// Configura o gráfico (cores, tipo, etc), materializa-o na página e, 
// A função *plotarGrafico* também invoca a função *atualizarGrafico*

function plotarGraficoRegistrosPorMes(resposta) {
console.log('iniciando plotagem do gráfico...(plotarGraficoRegistrosPorMes)');


var label = ['N/A'];

    var dados_registro_mes = {
        labels: label,
             datasets: [
            {
            yAxisID: 'y-umidade',
            label: "Registered",
            borderColor: '#03A63C',
            // backgroundColor: '',
            fill: true,
            data: []
        }
    ]
};



for (i = 0; i < resposta.length; i++) {
            var registro = resposta[i];

            if (registro.Qtd) {
                dados_registro_mes.datasets[0].data.push(registro.Qtd)
            }
            if (registro.Mes) {
                label.push(registro.Mes);
            }
            console.log(`${registro.Qtd} e ${registro.Mes}dados_registro_mes Registrado`);
        }
        
        console.log(dados_registro_mes)
        console.log(JSON.stringify(dados_registro_mes));


        var ctx = canvas_grafico_registered_month.getContext('2d');
            window.grafico_linha = Chart.Line(ctx, {
            data:dados_registro_mes,
            options: {
                responsive: true,
                animation: { duration: 4000 },
                hoverMode: 'index',
                stacked: false,
                title: {
                    display: false,
                    text: 'Dados capturados'
                },
                scales: {
                    yAxes: [{
                        type: 'linear',
                        display: true,
                        position: 'left',
                        id: 'y-temperatura',
                        ticks: {
                            beginAtZero: true,
                            max: 40,
                            min: 0
                        }
                    }, {
                        type: 'linear',
                        display: false,
                        position: 'right',
                        id: 'y-umidade',
                        ticks: {
                            beginAtZero: true,
                            max: 40,
                            min: 0
                        },

                        gridLines: {
                            drawOnChartArea: false,
                        },
                    }],
                }
            }
        });

        }

        window.onload = obterQtdPlayersRegistradosPorMes();


        var acessosthisweek = 0
        var acessoslastweek = 0

window.onload = contar_acessos_this_week()
window.onload = contar_acessos_last_week()
window.onload = obterQtdAcessosDiaMesAno()

function contar_acessos_this_week() {
    fetch("/usuarios/contaracessosthisweek").then(function (res1) {
        if (res1.ok) {
            console.log(res1)
            res1.json().then(function (res1) {
                console.log("Dados recebidos: ", JSON.stringify(res1))
                acessosthisweek = res1[0].Qtd
                qtd_acessos_this_week.innerHTML = acessosthisweek
                console.log(`Este é a quantidade de acessosthisweek ${acessosthisweek}`)
                }
            );
        } else {
            throw ('Houve um erro ao pegar info!');
        }
    }).catch(function (res1) {
        console.error(res1);
    });
}

function contar_acessos_last_week() {
    fetch("/usuarios/contaracessoslastweek").then(function (res1) {
        if (res1.ok) {
            console.log(res1)
            res1.json().then(function (res1) {
                console.log("Dados recebidos: ", JSON.stringify(res1))
                acessoslastweek = res1[0].Qtd
                qtd_acessos_last_week.innerHTML = acessoslastweek
                console.log(`Este é a quantidade de acessoslastweek ${acessoslastweek}`)
                }
            );
        } else {
            throw ('Houve um erro ao pegar info!');
        }
    }).catch(function (res1) {
        console.error(res1);
    });
}

function obterQtdAcessosDiaMesAno() {

    fetch(`/usuarios/quantidadeacessosdiamesano`, { cache: 'no-store' }).then(function (response) {
    if (response.ok) {
        response.json().then(function (resposta) {
            console.log(`Dados recebidos: ${JSON.stringify(resposta)}`);
            resposta.reverse();

       plotarGraficoAcessosDiaMesAno(resposta);       
        });
    } else {
        console.error('Nenhum dado encontrado ou erro na API');
    }
})
    .catch(function (error) {
        console.error(`Erro na obtenção dos dados p/ gráfico: ${error.message}`);
    });
}

// Esta função *plotarGrafico* usa os dados capturados na função anterior para criar o gráfico
// Configura o gráfico (cores, tipo, etc), materializa-o na página e, 
// A função *plotarGrafico* também invoca a função *atualizarGrafico*

// function plotarGraficoAcessosDiaMesAno(resposta) {
// console.log('iniciando plotagem do gráfico...(plotarGraficoAcessosDiaMesAno)');

// var label = [];

// var dataset = []

//     var dados_acessos = {
//         labels: label,
//              datasets: dataset
// };


// var dados_data = []
// for (i = 0; i < resposta.length; i++) {

//             var registro = resposta[i];
//             var data_rodada = {}

//             var date = `${registro.Dia}/${registro.Mes}/${registro.Ano}`
//             var numero_qtd = registro.Qtd

//             dados_data.push(numero_qtd)

//             console.log(`numero_qtd: ${numero_qtd} na data ${date}` )

//             data_rodada = {
//             // yAxisID: '',
//             label: "Acess",
//             borderColor: '#03A63C',
//             fill: true,
//             data: dados_data,
//             } 

//             dataset.push(data_rodada)
//             // data_rodada.label.unshift()
//             label.push(date)

//         }
        
//         console.log(dataset)
//         console.log(JSON.stringify(dados_acessos));


//         var ctx = canvas_grafico_acess.getContext('2d');
//             window.grafico_linha = Chart.Line(ctx, {
//             data: dados_acessos,
//             options: {
//                 responsive: true,
//                 animation: { duration: 4000 },
//                 hoverMode: 'index',
//                 stacked: false,
//                 title: {
//                     display: false,
//                     text: 'Dados capturados'
//                 },
//                 plugins: {
//                     legend: {
//                         font: {
//                             size: 8
//                         }
//                     }
//                 },
//                 scales: {
//                     yAxes: [{
//                         type: 'linear',
//                         display: true,
//                         position: 'left',
//                         id: 'y-temperatura',
//                         ticks: {
//                             beginAtZero: true,
//                             max: 40,
//                             min: 0
//                         }
//                     },
//                     ],
//                 }
//             }
//         });

//         }


        function plotarGraficoAcessosDiaMesAno(resposta) {
console.log('iniciando plotagem do gráfico...(plotarGraficoAcessosDiaMesAno)');

var label = [];

    var dados_acessos = {
        labels: label,
                datasets: [
            {
            yAxisID: 'y-umidade',
            label: "Acess",
            borderColor: '#03A63C',
            fill: true,
            data: [],
            }]
        };


        for (i = 0; i < resposta.length; i++) {

            var registro = resposta[i];
            // var data_rodada = {}

            var date = `${registro.Dia}/${registro.Mes}/${registro.Ano}`
            var numero_qtd = registro.Qtd

            dados_acessos.datasets[0].data.push(numero_qtd)

            console.log(`numero_qtd: ${numero_qtd} na data ${date}` )

            // data_rodada = {
            // // yAxisID: '',
            // label: "Acess",
            // borderColor: '#03A63C',
            // fill: true,
            // data: dados_data,
            // } 

            // dataset.push(data_rodada)
            // data_rodada.label.unshift()
            label.push(date)

        }
        
        console.log(JSON.stringify(dados_acessos));


        var ctx = canvas_grafico_acess.getContext('2d');
        window.grafico_linha = Chart.Line(ctx, {
            data: dados_acessos,
            options: {
                responsive: false,
                animation: { duration: 4000 },
                hoverMode: 'index',
                stacked: false,
                title: {
                    display: false,
                    text: 'Dados capturados'
                },
                scales: {
                    yAxes: [{
                        type: 'linear',
                        display: true,
                        position: 'left',
                        id: 'y-temperatura',
                        ticks: {
                            beginAtZero: true,
                            max: 20,
                            min: 0
                        }
                    }, {
                        type: 'linear',
                        display: false,
                        position: 'right',
                        id: 'y-umidade',
                        ticks: {
                            beginAtZero: true,
                            max: 30,
                            min: 0
                        },

                        gridLines: {
                            drawOnChartArea: false,
                        },
                    }],
                }
            }
        });

        }
        

    

</script>
